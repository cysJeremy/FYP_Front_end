{"ast":null,"code":"import _asyncToGenerator from\"/Users/windsor/FYP_Front_end/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/windsor/FYP_Front_end/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/windsor/FYP_Front_end/node_modules/@babel/runtime/regenerator/index.js\";import React from\"react\";import{useState}from\"react\";import{useEffect}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Field(props){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),brand=_useState2[0],setBrand=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),icon=_useState4[0],setIcon=_useState4[1];useEffect(function(){DetectImage(props.image);},[brand,icon]);var DetectImage=function DetectImage(image){return new Promise(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(resolve,reject){var formdata,blob;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:formdata=new FormData();_context.next=3;return fetch(image).then(function(r){return r.blob();});case 3:blob=_context.sent;formdata.append(\"image\",blob);fetch(\"http://localhost:6000/detectCarBrand\",{method:'POST',body:formdata,redirect:'follow'}).then(function(response){return response.text();}).then(function(response){var json=JSON.parse(response);console.log(json);if(Array.isArray(json)&&json.length>0){console.log(json[0].name);setBrand(json[0].name);setIcon(props.logo.getImage(json[0].name));}else{setBrand(\"\");setIcon(props.logo.getImage(\"\"));}}).catch(function(error){return console.log('error',error);});case 6:case\"end\":return _context.stop();}}},_callee);}));return function(_x,_x2){return _ref.apply(this,arguments);};}());};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"fieldset\",{disabled:true,className:\"field\",children:[/*#__PURE__*/_jsx(\"legend\",{children:props.name}),/*#__PURE__*/_jsx(\"img\",{src:props.image,className:\"field_image\"}),/*#__PURE__*/_jsx(\"br\",{}),props.des&&/*#__PURE__*/_jsxs(\"div\",{className:\"describe\",children:[/*#__PURE__*/_jsx(\"img\",{src:icon,className:\"field_brand\"}),/*#__PURE__*/_jsx(\"h4\",{children:brand})]})]})});}","map":{"version":3,"sources":["/Users/windsor/FYP_Front_end/src/components/Field.js"],"names":["React","useState","useEffect","Field","props","brand","setBrand","icon","setIcon","DetectImage","image","Promise","resolve","reject","formdata","FormData","fetch","then","r","blob","append","method","body","redirect","response","text","json","JSON","parse","console","log","Array","isArray","length","name","logo","getImage","catch","error","des"],"mappings":"yVAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,QAAT,KAAyB,OAAzB,CACA,OAASC,SAAT,KAA0B,OAA1B,C,wFACA,cAAe,SAASC,CAAAA,KAAT,CAAeC,KAAf,CAAqB,CAElC,cAA0BH,QAAQ,CAAC,EAAD,CAAlC,wCAAOI,KAAP,eAAcC,QAAd,eACA,eAAwBL,QAAQ,CAAC,EAAD,CAAhC,yCAAOM,IAAP,eAAaC,OAAb,eACAN,SAAS,CAAC,UAAI,CACZO,WAAW,CAACL,KAAK,CAACM,KAAP,CAAX,CACD,CAFQ,CAEP,CAACL,KAAD,CAAOE,IAAP,CAFO,CAAT,CAIA,GAAME,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,KAAD,CAAW,CAE7B,MAAO,IAAIC,CAAAA,OAAJ,0FAAY,iBAAOC,OAAP,CAAgBC,MAAhB,oIACbC,QADa,CACF,GAAIC,CAAAA,QAAJ,EADE,uBAEAC,CAAAA,KAAK,CAACN,KAAD,CAAL,CAAaO,IAAb,CAAkB,SAAAC,CAAC,QAAIA,CAAAA,CAAC,CAACC,IAAF,EAAJ,EAAnB,CAFA,QAEbA,IAFa,eAGnBL,QAAQ,CAACM,MAAT,CAAgB,OAAhB,CAAwBD,IAAxB,EAEAH,KAAK,CAAC,sCAAD,CAAyC,CAC1CK,MAAM,CAAE,MADkC,CAE1CC,IAAI,CAAER,QAFoC,CAG1CS,QAAQ,CAAE,QAHgC,CAAzC,CAAL,CAKGN,IALH,CAKQ,SAAAO,QAAQ,QAAIA,CAAAA,QAAQ,CAACC,IAAT,EAAJ,EALhB,EAMGR,IANH,CAMQ,SAAAO,QAAQ,CAAI,CACZ,GAAME,CAAAA,IAAI,CAAGC,IAAI,CAACC,KAAL,CAAWJ,QAAX,CAAb,CACAK,OAAO,CAACC,GAAR,CAAYJ,IAAZ,EACA,GAAIK,KAAK,CAACC,OAAN,CAAcN,IAAd,GAAuBA,IAAI,CAACO,MAAL,CAAc,CAAzC,CAA4C,CACxCJ,OAAO,CAACC,GAAR,CAAYJ,IAAI,CAAC,CAAD,CAAJ,CAAQQ,IAApB,EACA5B,QAAQ,CAACoB,IAAI,CAAC,CAAD,CAAJ,CAAQQ,IAAT,CAAR,CACA1B,OAAO,CAACJ,KAAK,CAAC+B,IAAN,CAAWC,QAAX,CAAoBV,IAAI,CAAC,CAAD,CAAJ,CAAQQ,IAA5B,CAAD,CAAP,CACH,CAJD,IAKI,CACA5B,QAAQ,CAAC,EAAD,CAAR,CACAE,OAAO,CAACJ,KAAK,CAAC+B,IAAN,CAAWC,QAAX,CAAoB,EAApB,CAAD,CAAP,CACH,CACN,CAlBH,EAmBGC,KAnBH,CAmBS,SAAAC,KAAK,QAAIT,CAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,CAAqBQ,KAArB,CAAJ,EAnBd,EALmB,sDAAZ,mEAAP,CA0BD,CA5BD,CA+BA,mBACE,kCACE,kBAAU,QAAQ,KAAlB,CAAmB,SAAS,CAAG,OAA/B,wBACI,wBAASlC,KAAK,CAAC8B,IAAf,EADJ,cAEI,YAAK,GAAG,CAAI9B,KAAK,CAACM,KAAlB,CAAyB,SAAS,CAAG,aAArC,EAFJ,cAGI,aAHJ,CAIKN,KAAK,CAACmC,GAAN,eAAa,aAAK,SAAS,CAAG,UAAjB,wBACV,YAAK,GAAG,CAAIhC,IAAZ,CAAkB,SAAS,CAAG,aAA9B,EADU,cAEV,oBAAKF,KAAL,EAFU,GAJlB,GADF,EADF,CAaD","sourcesContent":["import React from \"react\"\nimport { useState } from \"react\";\nimport { useEffect } from \"react\";\nexport default function Field(props){\n\n  const [brand, setBrand] = useState(\"\")\n  const [icon, setIcon] = useState(\"\")\n  useEffect(()=>{\n    DetectImage(props.image)  \n  },[brand,icon])\n\n  const DetectImage = (image) => {\n    \n    return new Promise(async (resolve, reject) => {\n      var formdata = new FormData();\n      let blob = await fetch(image).then(r => r.blob());\n    formdata.append(\"image\",blob);\n\n    fetch(\"http://localhost:6000/detectCarBrand\", {\n        method: 'POST',\n        body: formdata,\n        redirect: 'follow'\n    })\n      .then(response => response.text())\n      .then(response => {\n            const json = JSON.parse(response)\n            console.log(json)\n            if (Array.isArray(json) && json.length > 0) {\n                console.log(json[0].name)\n                setBrand(json[0].name);\n                setIcon(props.logo.getImage(json[0].name))\n            }\n            else{\n                setBrand(\"\");\n                setIcon(props.logo.getImage(\"\"));\n            }\n      })\n      .catch(error => console.log('error', error));\n    })\n  }\n  \n\n  return(\n    <div>\n      <fieldset disabled className = \"field\" >\n          <legend>{props.name}</legend>\n          <img src = {props.image} className = \"field_image\"/>\n          <br />\n          {props.des && <div className = \"describe\">\n              <img src = {icon} className = \"field_brand\"/>\n              <h4>{brand}</h4>\n          </div>}\n      </fieldset>\n    </div>  \n  )\n}"]},"metadata":{},"sourceType":"module"}