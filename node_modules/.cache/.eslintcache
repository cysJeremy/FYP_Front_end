[{"D:\\course note\\fyp\\website\\新建文件夹\\FYP_Front_end\\src\\index.js":"1","D:\\course note\\fyp\\website\\新建文件夹\\FYP_Front_end\\src\\App.js":"2","D:\\course note\\fyp\\website\\新建文件夹\\FYP_Front_end\\src\\components\\Header.js":"3","D:\\course note\\fyp\\website\\新建文件夹\\FYP_Front_end\\src\\components\\Camera.js":"4","D:\\course note\\fyp\\website\\新建文件夹\\FYP_Front_end\\src\\components\\Field.js":"5"},{"size":154,"mtime":1649851925054,"results":"6","hashOfConfig":"7"},{"size":694,"mtime":1649926669832,"results":"8","hashOfConfig":"7"},{"size":235,"mtime":1649988258143,"results":"9","hashOfConfig":"7"},{"size":5454,"mtime":1649989053704,"results":"10","hashOfConfig":"7"},{"size":2513,"mtime":1649988258128,"results":"11","hashOfConfig":"7"},{"filePath":"12","messages":"13","suppressedMessages":"14","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"15"},"lsolaw",{"filePath":"16","messages":"17","suppressedMessages":"18","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"15"},{"filePath":"19","messages":"20","suppressedMessages":"21","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"22"},{"filePath":"23","messages":"24","suppressedMessages":"25","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"26","messages":"27","suppressedMessages":"28","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"29","usedDeprecatedRules":"22"},"D:\\course note\\fyp\\website\\新建文件夹\\FYP_Front_end\\src\\index.js",[],[],["30","31"],"D:\\course note\\fyp\\website\\新建文件夹\\FYP_Front_end\\src\\App.js",[],[],"D:\\course note\\fyp\\website\\新建文件夹\\FYP_Front_end\\src\\components\\Header.js",[],[],["32","33"],"D:\\course note\\fyp\\website\\新建文件夹\\FYP_Front_end\\src\\components\\Camera.js",["34","35"],[],"D:\\course note\\fyp\\website\\新建文件夹\\FYP_Front_end\\src\\components\\Field.js",["36","37","38"],[],"import React from \"react\"\r\nimport { useState } from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport io from 'socket.io-client'\r\nimport \"./Field.css\"\r\nexport default function Field(props){\r\n\r\n  const [brand, setBrand] = useState(\"\")\r\n  const [icon, setIcon] = useState(\"\")\r\n  const [image, setImage] = useState((props.image))\r\n\r\n  //Load Field Details upon initial rendering\r\n  useEffect(()=>{\r\n      UpdateField(props.image) //update Field Element using the image URL\r\n  },[])\r\n\r\n  //Socket.IO listener for auto-updating\r\n  useEffect( () => {\r\n      //console.log('add camera ', props.cameraID);\r\n      //console.log('add socket ', props.url);\r\n      //console.log('add image ', props.image);\r\n      const socket = io(props.url);\r\n      socket.on('connect', function(){});\r\n      socket.on(\"CameraImageUpdated\", (arg) => { \r\n        //console.log(image);\r\n          if (arg === props.cameraID) //Message applies to all the fields of the same cameraID\r\n          {\r\n              UpdateField(props.image);\r\n              //console.log(image);\r\n          }\r\n      });\r\n  }, []);\r\n\r\n  const UpdateField = (image) => {\r\n    return new Promise(async (resolve, reject) => {\r\n      var formdata = new FormData();\r\n      let blob = await fetch(image).then(r => r.blob());\r\n    formdata.append(\"image\",blob);\r\n\r\n    //set the image of field\r\n    setImage(URL.createObjectURL(blob));\r\n    if(props.des)\r\n    {\r\n        fetch(props.url + \"detectCarBrand\", {\r\n        method: 'POST',\r\n        body: formdata,\r\n        redirect: 'follow'\r\n      })\r\n      .then(response => response.text())\r\n      .then(response => {\r\n            const json = JSON.parse(response)\r\n            console.log(json)\r\n            if (Array.isArray(json) && json.length > 0) {\r\n                console.log(json[0].name)\r\n                setBrand(json[0].name);\r\n                setIcon(props.logo.getImage(json[0].name))\r\n            }\r\n            else{\r\n                setBrand(\"\");\r\n                setIcon(props.logo.getImage(\"\"));\r\n            }\r\n      })\r\n      .catch(error => console.log('error', error));  \r\n    }\r\n    })\r\n  }\r\n  \r\n\r\n  return(\r\n    <div>\r\n      <fieldset disabled className = \"field\" >\r\n          <legend>{props.name}</legend>\r\n          <img src = {image} className = \"field_image\" alt= {props.name+\"image\"}/>\r\n          {props.des && <div className = \"describe\">\r\n              <img src = {icon} className = \"field_brand\"/>\r\n              <h4>{brand}</h4>\r\n          </div>}\r\n      </fieldset>\r\n    </div>  \r\n  )\r\n}",{"ruleId":"39","replacedBy":"40"},{"ruleId":"41","replacedBy":"42"},{"ruleId":"39","replacedBy":"43"},{"ruleId":"41","replacedBy":"44"},{"ruleId":"45","severity":1,"message":"46","line":40,"column":11,"nodeType":"47","messageId":"48","endLine":40,"endColumn":21},{"ruleId":"49","severity":1,"message":"50","line":51,"column":7,"nodeType":"51","endLine":51,"endColumn":9,"suggestions":"52"},{"ruleId":"49","severity":1,"message":"53","line":15,"column":5,"nodeType":"51","endLine":15,"endColumn":7,"suggestions":"54"},{"ruleId":"49","severity":1,"message":"55","line":32,"column":6,"nodeType":"51","endLine":32,"endColumn":8,"suggestions":"56"},{"ruleId":"57","severity":1,"message":"58","line":75,"column":15,"nodeType":"59","endLine":75,"endColumn":60},"no-native-reassign",["60"],"no-negated-in-lhs",["61"],["60"],["61"],"no-unused-vars","'socket_url' is assigned a value but never used.","Identifier","unusedVar","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'getImage'. Either include it or remove the dependency array.","ArrayExpression",["62"],"React Hook useEffect has missing dependencies: 'UpdateField' and 'props.image'. Either include them or remove the dependency array.",["63"],"React Hook useEffect has missing dependencies: 'UpdateField', 'props.cameraID', 'props.image', and 'props.url'. Either include them or remove the dependency array.",["64"],"jsx-a11y/alt-text","img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","JSXOpeningElement","no-global-assign","no-unsafe-negation",{"desc":"65","fix":"66"},{"desc":"67","fix":"68"},{"desc":"69","fix":"70"},"Update the dependencies array to be: [getImage]",{"range":"71","text":"72"},"Update the dependencies array to be: [UpdateField, props.image]",{"range":"73","text":"74"},"Update the dependencies array to be: [UpdateField, props.cameraID, props.image, props.url]",{"range":"75","text":"76"},[1922,1924],"[getImage]",[478,480],"[UpdateField, props.image]",[1077,1079],"[UpdateField, props.cameraID, props.image, props.url]"]